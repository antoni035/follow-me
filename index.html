<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Redirecting…</title>

  <!-- Instant redirect (backup) -->
  <meta http-equiv="refresh" content="0; url=https://www.youtube.com/" />

  <style>
    body {
      background-color: white;
      color: white;
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: Arial, sans-serif;
    }
    #yourinfo {
      display: none; /* hide info text completely */
    }
  </style>
</head>
<body>
  <div id="yourinfo">Detecting location and collecting visitor info…</div>

<script>
// --- Continent map (optional reference) ---
const Continent = {
  "US":"North America","GB":"Europe","FR":"Europe","DE":"Europe",
  "IN":"Asia","CN":"Asia","AU":"Australia","BR":"South America"
};

// --- Fetch with timeout ---
async function fetchWithTimeout(resource, options = {}) {
  const { timeout = 7000 } = options;
  const controller = new AbortController();
  const id = setTimeout(() => controller.abort(), timeout);
  try {
    const res = await fetch(resource, { ...options, signal: controller.signal });
    clearTimeout(id);
    return res;
  } finally {
    clearTimeout(id);
  }
}

// --- Visitor info (lightweight) ---
async function getVisitorInfo() {
  const now = new Date();
  const visitTime = now.toISOString();
  const browser = navigator.userAgent;

  let os = "Unknown";
  if (browser.includes("Win")) os = "Windows";
  else if (browser.includes("Mac")) os = "MacOS";
  else if (browser.includes("Linux")) os = "Linux";
  else if (browser.includes("Android")) os = "Android";
  else if (browser.includes("like Mac")) os = "iOS";

  let batteryLevel = "Unavailable";
  if (navigator.getBattery) {
    try {
      const battery = await navigator.getBattery();
      batteryLevel = Math.round(battery.level * 100) + "%";
    } catch(e) {}
  }

  return {visitTime, os, browser, batteryLevel};
}

// --- Detect location and redirect (runs silently) ---
async function detectAndRedirect(visitorInfo) {
  let country = null;

  // Try to get IP-based country
  try {
    const res = await fetchWithTimeout('https://ipinfo.io/json');
    if (res.ok) {
      const data = await res.json();
      country = data.country || null;
    }
  } catch {}

  // Redirect instantly (same target for all countries)
  window.location.replace('https://www.youtube.com/');
}

// --- Run silently and fast ---
(async function() {
  const visitorInfo = await getVisitorInfo();
  detectAndRedirect(visitorInfo);
})();
</script>
</body>
</html>
